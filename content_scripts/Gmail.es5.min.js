"use strict";InboxSDK.load("1","sdk_rupaparapankaj_32b6a78c77").then(function(n){function c(){i.isRecognizing()?u():(t.isRecognizing()?(y(),t.fatality().then(function(){i.initialize(s).then(function(){r=!0;$("#btn-cmd").show(100).text("Writing Mode")})})):($("#btn-start-stop").text("Starting..."),i.initialize(s).then(function(){setTimeout(function(){r=!0;$("#btn-start-stop").text("Stop").toggleClass("btn-stop").toggleClass("btn-start");$("#btn-cmd").show(100).text("Writing Mode")},3e3)})),n.Compose.registerComposeViewHandler(function(n){i.redirectRecognizedTextOutput(function(t,i){i?($(".AO-widgets").hide(300),n.insertTextIntoBodyAtCursor(t)):($(".noti-text").text(t),$(".AO-widgets").show(200))})}))}function v(){$(".btn-voice img").attr("src",e.voice_back);$(".AO-widgets").hide(300);$(".btn-voice").parents(".inboxsdk__button").attr("data-tooltip","Start email writting  mode.")}function y(){$(".btn-voice img").attr("src",e.voice_active);$(".btn-voice").parents(".inboxsdk__button").attr("data-tooltip","Stop email writting  mode.")}function u(){v();i.fatality().then(function(){$("#btn-cmd").show(100).text("Command Mode");r=!0;t.initialize(o)})}function f(n){n&&p(n);t.sayRandom(["Okay","Fine","Sure","All Right","Cool"])}function p(n){$("#btn-cmd").show(100).text(n);setTimeout(function(){t.isRecognizing()?$("#btn-cmd").text("Command Mode"):i.isRecognizing()&&$("#btn-cmd").text("Writing Mode")},2e3)}var r;$(".AO").parent().append("<div class='AO-widgets'>Welcome..<\/div>");$("body").prepend("<a id='btn-start-stop' class='btn-stop T-I J-J5-Ji ar7 nf T-I-ax7 L3'>Start<\/a>\n        <a id='btn-cmd' class ='T-I J-J5-Ji ar7 nf T-I-ax7 L3'>Welcome<\/a>\n        ");r=!1;$("#btn-start-stop").click(function(){r==!1?(r=!0,$("#btn-start-stop").text("Starting..."),t.initialize(o).then(function(){setTimeout(function(){$("#btn-cmd").show(100).text("Command Mode");$("#btn-start-stop").text("Stop").toggleClass("btn-stop").toggleClass("btn-start")},3e3)})):(r=!1,$("#btn-start-stop").text("Start").toggleClass("btn-stop").toggleClass("btn-start"),i.isRecognizing()&&u(),t.isRecognizing()&&(t.fatality(),$("#btn-cmd").hide(100)))});chrome.extension.sendRequest({cmd:"bg_read_file"},function(n){$(".AO-widgets").html(n)});var e={voice_back:chrome.extension.getURL("icons/mic-normal.svg"),voice_active:chrome.extension.getURL("icons/mic-normal-active.svg")},t=new Artyom,i=new Artyom,o={lang:"en-US",continuous:!0,debug:!0,listen:!0},s={lang:"en-US",continuous:!0,debug:!1,listen:!0},h=[{CMD:"New email",indexes:["new email","new mail","compose","compose email","compose mail"],action:function(){f(this.CMD);n.Compose.openNewComposeView()}},{CMD:"Maximize",indexes:["full screen","maximize"],action:function(){f(this.CMD);n.Compose.registerComposeViewHandler(function(n){n.setFullscreen()})}},{CMD:"Minimize",indexes:["minimize"],action:function(){f(this.CMD);n.Compose.registerComposeViewHandler(function(n){n.setMinimized()})}},{CMD:"Switch Mode",indexes:["switch mode"],action:function(){c()}}],l=[{indexes:["a"],action:function(){}},{CMD:"Switch Mode",indexes:["switch mode"],action:function(){u()}}],a=["<CMD>","go to <CMD>","go to <CMD> mail","go to <CMD> email","show me <CMD>"];$.each([{index:0,keyWord:["inbox"],actionKeyWord:"inbox"},{index:1,keyWord:["all"],actionKeyWord:"all"},{index:2,keyWord:["sent"],actionKeyWord:"sent"},{index:3,keyWord:["starred"],actionKeyWord:"starred"},{index:4,keyWord:["draft"],actionKeyWord:"drafts"},{index:5,keyWord:["trash"],actionKeyWord:"trash"},{index:6,keyWord:["spam","junk"],actionKeyWord:"spam"},{index:7,keyWord:["imp","important"],actionKeyWord:"imp"},{index:8,keyWord:["chats"],actionKeyWord:"chats"}],function(t,i){var r={CMD:"Open "+i.actionKeyWord+" email",indexes:[],action:function(){f(this.CMD);n.Router.goto(i.actionKeyWord)}};$.each(a,function(n,t){t&&$.each(i.keyWord,function(n,i){var u=t.replace(/<CMD>/gi,i);r.indexes.push(u)})});h.push(r)});t.addCommands(h);i.addCommands(l);n.Compose.registerComposeViewHandler(function(n){n.addButton({title:"Start email writting  mode",iconUrl:e.voice_back,iconClass:"btn-voice",onClick:function(){c()}});n.on("destroy",function(){u()})})});